# Test to verify the plugin works with Coursier 2.1.24
> compile
> sbtixGenerate
$ exists repo.nix
$ exists project/repo.nix
# Compare with expected output
$ must-mirror repo.nix expected/repo.nix
$ must-mirror project/repo.nix expected/project-repo.nix

# Generate the default.nix for building
> genComposition
$ exists default.nix

# Run nix-build to verify the whole build works with Coursier 2.1.24 compatibility
$ exec rm -rf result
$ exec nix-build
$ exists result

# Verify the generated Nix contains the correct symlink strategy for Coursier 2.1.24 compatibility
$ exec grep -q 'cat <<IVY_EOF > $ivyDir/ivys/ivy.xml' sbtix-generated.nix
$ exec grep -q 'ln -sf ivy.xml' sbtix-generated.nix

# Test the generated executable
$ exec result/bin/three

# Note: Full nix-build testing can be done manually in a Nix environment:
# $ exec rm -rf result
# $ exec nix-build
# $ exists result
